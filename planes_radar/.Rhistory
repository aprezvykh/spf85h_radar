ret$strip.text <- element_blank()
ret$axis.text <- element_blank()
ret$plot.title <- element_blank()
ret$axis.title <- element_blank()
ret$panel.spacing <- unit(1, "lines")
ret$plot.margin <- structure(c(-1, -1, -5, -9), unit = "lines", valid.unit = 3L, class = "unit")
ret
}
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
png("~/bgnd.png",width = 800,height = 600,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
theme_blank <- function(...) {
ret <- theme_bw(...)
ret$line <- element_blank()
ret$rect <- element_blank()
ret$strip.text <- element_blank()
ret$axis.text <- element_blank()
ret$plot.title <- element_blank()
ret$axis.title <- element_blank()
ret$panel.spacing <- unit(1, "lines")
ret$plot.margin <- structure(c(-1, -1, -5, -9), unit = "lines", valid.unit = 3L, class = "unit")
ret$plot.title = NULL
ret
}
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
png("~/bgnd.png",width = 800,height = 600,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
theme_blank <- function(...) {
ret <- theme_bw(...)
ret$line <- element_blank()
ret$rect <- element_blank()
ret$strip.text <- element_blank()
ret$axis.text <- element_blank()
ret$plot.title <- element_blank()
ret$axis.title <- element_blank()
ret$panel.spacing <- unit(1, "lines")
ret$plot.margin <- structure(c(-1, -1, -5, -9), unit = "lines", valid.unit = 3L, class = "unit")
ret$plot.title = NULL
ret$plot.background = element_rect(fill = "black")
ret
}
png("~/bgnd.png",width = 800,height = 600,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
png("~/bgnd.png",width = 800,height = 650,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
png("~/bgnd.png",width = 800,height = 550,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
png("~/bgnd.png",width = 800,height = 500,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
png("~/bgnd.png",width = 800,height = 510,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
png("~/bgnd.png",width = 800,height = 600,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
theme_blank <- function(...) {
ret <- theme_bw(...)
ret$line <- element_blank()
ret$rect <- element_blank()
ret$strip.text <- element_blank()
ret$axis.text <- element_blank()
ret$plot.title <- element_blank()
ret$axis.title <- element_blank()
ret$panel.spacing <- unit(1, "lines")
ret$plot.margin <- structure(c(-1, -1, -5, -9), unit = "lines", valid.unit = 3L, class = "unit")
ret$plot.title = NULL
ret$plot.background = element_rect(fill = "black")
ret$strip.background = element_rect(fill= "black")
ret
}
png("~/bgnd.png",width = 800,height = 600,units = "px")
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
ggmap(map,extent = "device") + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
png("~/bgnd.png",width = 800,height = 600,units = "px")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
png("~/bgnd.png",width = 800,height = 600,units = "px",bg = "black")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
png("~/bgnd.png",width = 800,height = 600,units = "px",bg = "black")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
ggtitle(Sys.time(), color = "green")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
ggtitle(Sys.time())
dev.off()
png("~/bgnd.png",width = 800,height = 600,units = "px",bg = "black")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank()
dev.off()
big.means <- read.table("archive.log")
big.means <- read.table("archive.log",sep = ",")
big.means <- read.table("archive.log",sep = ",",header = T)
big.means
big.means <- read.table("archive.log",sep = "",header = T)
big.means <- read.table("archive.log",sep = "",header = F)
write.table(big.means, "archive.log", append = T,col.names = F,row.names = F,quote = F,sep = "\t")
big.means <- read.table("archive.log",header = F)
big.means <- read.table("archive.log")
big.means <- read.table("archive.log")
big.means
names(big.means) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
lims <- read.table("archive.log")
names(lims) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
max(lims$lat)
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green")
ggmap(map) + geom_point(data = linc, aes(x = lon, y = lat), color = "green") + geom_polygon(aes(x = lon, y = lat))
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_polygon(aes(x = lon, y = lat))
lims <- read.table("archive.log")
names(lims) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_polygon(aes(x = lon, y = lat),alpha = 0.2)
ggmap(map) + geom_path(data = lims, aes(x = lon, y = lat), color = "green") + geom_polygon(aes(x = lon, y = lat),alpha = 0.2)
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_path(aes(x = lon, y = lat),alpha = 0.2)
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_path(aes(x = lon, y = lat),color = "red")
lims$lat
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_polygon(aes(x = lon, y = lat),color = "red")
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_polygon(data = lims, aes(x = lon, y = lat),color = "red")
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_polygon(data = lims, aes(x = lon, y = lat),color = "red",alpha = 0)
lims <- read.table("archive.log")
names(lims) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_polygon(data = lims, aes(x = lon, y = lat),color = "red",alpha = 0)
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_density2d(data = lims, aes(x = lon, y = lat),color = "red",alpha = 0)
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_density2d(data = lims, aes(x = lon, y = lat),color = "red",alpha = 3)
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_density2d(data = lims, aes(x = lon, y = lat),color = "red",alpha = 0.9)
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_density2d(data = lims, aes(x = lon, y = lat),color = "red",alpha = 0.3)
lims <- read.table("archive.log")
names(lims) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_density2d(data = lims, aes(x = lon, y = lat),color = "red",alpha = 0.3)
ggmap(map) + geom_point(data = lims, aes(x = lon, y = lat), color = "green") + geom_density2d(data = lims, aes(x = lon, y = lat),color = "blue",alpha = 0.4)
max(lims$lat)
max(lims$lon)
max(lims$lon)
min(lims$lon)
min(lims$lon)
ax(lims$lon)
min(lims$lon)
max(lims$lon)
max(lims$lat)
min(lims$lat)
#coords <- c(left = 35.812683, bottom = 54.557730, right = 38.836670,top = 55.624895)
coords <- c(left = min(lims$lon) + 0.5, bottom = min(lims$lat) + 0.5, right = max(lims$lon) + 0.5, top = max(lims$lat) + 0.5)
map <- get_stamenmap(bbox = coords, maptype = "toner")
m_inv <- as.raster(apply(map, 2, invert))
class(m_inv) <- class(map)
attr(m_inv, "bb") <- attr(map, "bb")
saveRDS(m_inv, "map.RDS")
map <- readRDS("map.RDS")
names(big.means) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
write.table(big.means, "archive.log", append = T, col.names = F,row.names = F,quote = F,sep = "\t")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green")
#coords <- c(left = 35.812683, bottom = 54.557730, right = 38.836670,top = 55.624895)
coords <- c(left = 35.812683, bottom = 54.157730, right = 38.836670,top = 55.624895)
map <- get_stamenmap(bbox = coords, maptype = "toner")
m_inv <- as.raster(apply(map, 2, invert))
class(m_inv) <- class(map)
attr(m_inv, "bb") <- attr(map, "bb")
saveRDS(m_inv, "map.RDS")
map <- readRDS("map.RDS")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green")
png("~/bgnd.png",width = 800,height = 600,units = "px",bg = "black")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
geom_density2d(data = lims, aes(x = lon, y = lat),color = "blue",alpha = 0.4)
dev.off()
coords <- c(left = 35.212683, bottom = 54.157730, right = 38.836670,top = 55.624895)
map <- get_stamenmap(bbox = coords, maptype = "toner")
m_inv <- as.raster(apply(map, 2, invert))
class(m_inv) <- class(map)
attr(m_inv, "bb") <- attr(map, "bb")
saveRDS(m_inv, "map.RDS")
map <- readRDS("map.RDS")
png("~/bgnd.png",width = 800,height = 600,units = "px",bg = "black")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
geom_density2d(data = lims, aes(x = lon, y = lat),color = "blue",alpha = 0.4)
dev.off()
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
geom_density2d(data = lims, aes(x = lon, y = lat),color = "blue",alpha = 0.4,geom = "polygon")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
stat_density2d(data = lims, aes(x = lon, y = lat),color = "blue",alpha = 0.4,geom = "polygon")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
stat_density2d(data = lims, aes(x = lon, y = lat),color = "blue",alpha = 0,geom = "polygon")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
stat_density2d(data = lims, aes(x = lon, y = lat),color = "blue",alpha = 0,geom = "line")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
stat_density2d(data = lims, aes(x = lon, y = lat),color = "blue", alpha = 0, geom = "line")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
stat_density2d(data = lims, aes(x = lon, y = lat),color = "blue", alpha = 0, geom = "polygon")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
geom_density2d(data = lims, aes(x = lon, y = lat),color = "blue", alpha = 0.3)
png("~/bgnd.png",width = 800,height = 600,units = "px",bg = "black")
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_text(data = big.means, aes(x = lon, y = lat, label = paste(id, "\n",
"Alt: ", round(alt,0), "\n",
"Speed: ", round(speed,0), "\n",
"Vert: ", round(vert,0),
sep = "")),
hjust = 1.1, vjust = 1.1,size = 3,color = "green") +
geom_spoke(data = big.means, aes(x = lon, y = lat, angle = hdg),radius = 0.08, color = "green") + theme_blank() +
geom_density2d(data = lims, aes(x = lon, y = lat),color = "blue", alpha = 0.4)
dev.off()
me <- data.frame(lat = 55.117038, lon = 36.597082)
me$lat
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_point(data=me, aes(x = lon,y = lat))
ggmap(map) + geom_point(data = big.means, aes(x = lon, y = lat), color = "green") +
geom_point(data=me, aes(x = lon,y = lat), color = "red")
lims <- read.table("archive.log")
names(lims) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
ggplot(lims$alt)
ggplot(lims$alt, lims$speed)
plot(lims$alt, lims$speed)
ggplot(lims$hdg, lims$speed)
plot(lims$hdg, lims$speed)
library(ggmap)
library("methods")
library("ggplot2")
deg2rad <- function(deg) {(deg * pi) / (180)}
invert <- function(x) rgb(t(255-col2rgb(x))/255)
theme_blank <- function(...) {
ret <- theme_bw(...)
ret$line <- element_blank()
ret$rect <- element_blank()
ret$strip.text <- element_blank()
ret$axis.text <- element_blank()
ret$plot.title <- element_blank()
ret$axis.title <- element_blank()
ret$panel.spacing <- unit(1, "lines")
ret$plot.margin <- structure(c(-1, -1, -5, -9), unit = "lines", valid.unit = 3L, class = "unit")
ret$plot.title = NULL
ret$plot.background = element_rect(fill = "black")
ret$strip.background = element_rect(fill= "black")
ret
}
theme(plot.margin = )
dir <- "~/planes_radar/"
setwd(dir)
is.empty <- system("cat test.log",intern = T)
if(identical(is.empty, character(0))){
png("~/bgnd.png",width = 800,height = 600,units = "px",bg = "black")
plot(c(0, 1), c(0, 1), ann = F, bty = 'n', type = 'n', xaxt = 'n', yaxt = 'n')
text(x = 0.5, y = 0.5, paste("No planes are currently detactable"),
cex = 4, col = "green")
dev.off()
}
dat <- read.table("test.log",header = F,sep = ",")
names(dat) <- c("type", "n", "X1", "X2", "flight",
"X3", "X4", "X5", "X6", "X7", "X8",
"alt", "speed", "heading", "lat", "lon",
"vertical", "X9", "X10", "X11", "X12", "X13")
dat <- data.frame(dat$flight, dat$alt, dat$speed, dat$heading,
dat$lat, dat$lon, dat$vertical)
big.means <- data.frame()
for(f in unique(dat$dat.flight)){
print(f)
df <- dat[dat$dat.flight == f,]
df.alt <- mean(na.omit(df$dat.alt))
df.speed <- mean(na.omit(df$dat.speed))
df.hdg <- mean(na.omit(df$dat.heading))
df.lat <- mean(na.omit(df$dat.lat))
if(is.nan(unique(df.lat))){
next
}
df.lon <- mean(na.omit(df$dat.lon))
if(is.nan(unique(df.lon))){
next
}
df.vert <- mean(na.omit(df$dat.vertical))
means.df <- data.frame(f, df.alt, df.speed, df.hdg, df.lat, df.lon, df.vert)
big.means <- rbind(means.df, big.means)
}
###here is default coords
#coords <- c(left = 35.812683, bottom = 54.557730, right = 38.836670,top = 55.624895)
#coords <- c(left = 35.212683, bottom = 54.157730, right = 38.836670,top = 55.624895)
#map <- get_stamenmap(bbox = coords, maptype = "toner")
#m_inv <- as.raster(apply(map, 2, invert))
#class(m_inv) <- class(map)
#attr(m_inv, "bb") <- attr(map, "bb")
#saveRDS(m_inv, "map.RDS")
map <- readRDS("map.RDS")
names(big.means) <- c("id", "alt", "speed", "hdg", "lat", "lon", "vert")
big.means$id
lims[lims$id %in% big.means$id,]
lims[lims$id == "4B160D",]
table(t(lims$id))
lims[lims$id == "42439F",]
ggmap(map) + geom_line(data = lims[lims$id == "42439F",], aes(x = lon, y = lat))
ggmap(map) + geom_line(data = lims[lims$id == "42439F",], aes(x = lon, y = lat), color = "green")
ggmap(map) + geom_line(data = lims[lims$id == "42439F",], aes(x = lon, y = lat), color = "blue")
lims$id[1]
hex2bin(lims$id[1])
View(lims)
strtoi("4240CB")
hexdat <- replicate(10, paste(format.hexmode(sample(16,4)-1),collapse=''))
bin <- apply(outer(0:15,3:0,function(x,y) x%/%(2^y)%%2),1,paste,collapse="")
names(bin) <- format.hexmode( 0:15 )
cbind( hexdat, sapply( strsplit(hexdat,'') , function(x) paste( bin[x], collapse='' ) ) )
hex2bin(lims$id[1])
lims$id[1]
install.packages("BMS")
library("BMS")
hex2bin("4243FC")
paste(hex2bin("4243FC"),collapse = "")
BinToDec <- function(x)
BinToDec <- function(x){
sum(2^(which(rev(unlist(strsplit(as.character(x), "")) == 1))-1))
}
pp <- paste(hex2bin("4243FC"),collapse = "")
BinToDec(pp)
pp
rawToChar("010000100100001111111100")
rawToChar(010000100100001111111100)
bin <- as.raw("010000100100001111111100")
bin <- as.raw(010000100100001111111100)
pp <- paste(hex2bin("4243FC"),collapse = "")
BinToDec(pp)
pp
pp <- paste(hex2bin("4243FC"),collapse = "")
pp
